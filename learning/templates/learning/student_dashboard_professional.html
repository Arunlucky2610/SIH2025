{% extends 'learning/base.html' %}
{% load static %}

{% block title %}Student Dashboard - Rural Digital Learning{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/ultra-modern.css' %}">
<style>
/* Professional Student Dashboard Styling - Matching Parent Dashboard */
.glass-card {
    background: rgba(255, 255, 255, 0.85) !important;
    backdrop-filter: blur(20px) !important;
    border: 1px solid rgba(255, 255, 255, 0.3) !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1) !important;
    transition: all 0.3s ease !important;
}

.glass-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15) !important;
    background: rgba(255, 255, 255, 0.9) !important;
}

.stats-card {
    cursor: pointer;
    transition: all 0.3s ease;
}

.stats-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
}

.text-dark {
    color: #1a202c !important;
    font-weight: 700 !important;
}

.card-title {
    color: #2d3748 !important;
    font-weight: 800 !important;
    font-size: 1.15rem !important;
}

.floating-action {
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 1000;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

@keyframes orbit {
    0% { transform: rotate(0deg) translateX(40px) rotate(0deg); }
    100% { transform: rotate(360deg) translateX(40px) rotate(-360deg); }
}

.student-icon-container {
    animation: float 3s ease-in-out infinite;
}

/* Quick Action Cards */
.quick-action-card {
    position: relative;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.3s ease;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
}

.quick-action-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
}

.quick-action-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.5s;
}

.quick-action-card:hover::before {
    left: 100%;
}
</style>
{% endblock %}

{% block content %}
<div class="container-fluid p-4">
    <!-- Professional Header Section - Matching Parent Dashboard Style -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="glass-card rounded-4 overflow-hidden">
                <div style="background: linear-gradient(135deg, #4F46E5 0%, #7C3AED 100%); color: white; padding: 2rem;">
                    <div class="row align-items-center">
                        <div class="col-lg-8">
                            <div class="mb-3">
                                <h1 class="display-6 fw-bold mb-2">
                                    🎓 Student Dashboard
                                </h1>
                                <p class="lead mb-0 opacity-90">
                                    Welcome back, {{ user.first_name|default:user.username }}! Ready to continue your digital learning journey?
                                </p>
                                <div class="d-flex flex-wrap gap-2 mt-3">
                                    <div class="px-3 py-2 rounded-pill d-inline-flex align-items-center" style="background: rgba(255,255,255,0.2); color: white; font-weight: 600;">
                                        <i class="bi bi-person-badge me-2"></i> 
                                        {{ user.userprofile.role|title }}
                                    </div>
                                    {% if user.userprofile.grade %}
                                    <div class="px-3 py-2 rounded-pill d-inline-flex align-items-center" style="background: rgba(255,255,255,0.2); color: white; font-weight: 600;">
                                        <i class="bi bi-bookmark me-2"></i> 
                                        Grade {{ user.userprofile.grade }}
                                    </div>
                                    {% endif %}
                                    <div class="px-3 py-2 rounded-pill d-inline-flex align-items-center" style="background: rgba(255,255,255,0.2); color: white; font-weight: 600;">
                                        <i class="bi bi-calendar me-2"></i> 
                                        Today
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Professional Student Dashboard Icon -->
                        <div class="col-lg-4 text-end">
                            <div class="d-flex align-items-center justify-content-center h-100">
                                <div class="position-relative d-inline-block">
                                    <div class="student-icon-container">
                                        <div class="rounded-circle p-3 shadow-lg position-relative d-flex align-items-center justify-content-center" style="background: #ffffff !important; border: 2px solid rgba(255,255,255,0.3); width: 80px; height: 80px;">
                                            <!-- Central Student Icon -->
                                            <i class="bi bi-mortarboard-fill" style="font-size: 2.2rem; color: #4F46E5;"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Professional Stats Cards Row - Matching Parent Dashboard -->
    <div class="row g-4 mb-4">
        <!-- Lessons Completed -->
        <div class="col-xl-3 col-lg-6 col-md-6">
            <div class="glass-card stats-card rounded-4 h-100">
                <div class="card-body p-4 text-center">
                    <div class="mb-3">
                        <div class="d-inline-flex align-items-center justify-content-center rounded-circle bg-success bg-opacity-10" style="width: 60px; height: 60px;">
                            <i class="bi bi-book-fill text-success fs-3"></i>
                        </div>
                    </div>
                    <h3 class="fw-bold text-success mb-2">12</h3>
                    <p class="card-title text-dark fw-semibold mb-2">Lessons Completed</p>
                    <p class="text-muted small mb-0">Out of 25 total</p>
                </div>
            </div>
        </div>

        <!-- Current Progress -->
        <div class="col-xl-3 col-lg-6 col-md-6">
            <div class="glass-card stats-card rounded-4 h-100">
                <div class="card-body p-4 text-center">
                    <div class="mb-3">
                        <div class="d-inline-flex align-items-center justify-content-center rounded-circle bg-primary bg-opacity-10" style="width: 60px; height: 60px;">
                            <i class="bi bi-graph-up text-primary fs-3"></i>
                        </div>
                    </div>
                    <h3 class="fw-bold text-primary mb-2">75%</h3>
                    <p class="card-title text-dark fw-semibold mb-2">Overall Progress</p>
                    <p class="text-muted small mb-0">Digital Learning</p>
                </div>
            </div>
        </div>

        <!-- Average Score -->
        <div class="col-xl-3 col-lg-6 col-md-6">
            <div class="glass-card stats-card rounded-4 h-100">
                <div class="card-body p-4 text-center">
                    <div class="mb-3">
                        <div class="d-inline-flex align-items-center justify-content-center rounded-circle bg-warning bg-opacity-10" style="width: 60px; height: 60px;">
                            <i class="bi bi-star-fill text-warning fs-3"></i>
                        </div>
                    </div>
                    <h3 class="fw-bold text-warning mb-2">85%</h3>
                    <p class="card-title text-dark fw-semibold mb-2">Average Score</p>
                    <p class="text-muted small mb-0">Performance rating</p>
                </div>
            </div>
        </div>

        <!-- Learning Streak -->
        <div class="col-xl-3 col-lg-6 col-md-6">
            <div class="glass-card stats-card rounded-4 h-100">
                <div class="card-body p-4 text-center">
                    <div class="mb-3">
                        <div class="d-inline-flex align-items-center justify-content-center rounded-circle bg-danger bg-opacity-10" style="width: 60px; height: 60px;">
                            <i class="bi bi-fire text-danger fs-3"></i>
                        </div>
                    </div>
                    <h3 class="fw-bold text-danger mb-2">7</h3>
                    <p class="card-title text-dark fw-semibold mb-2">Day Streak</p>
                    <p class="text-muted small mb-0">Keep it up!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions Section - Professional Style -->
    <div class="row g-4 mb-4">
        <div class="col-12">
            <div class="glass-card rounded-4">
                <div class="card-body p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <div>
                            <h5 class="card-title text-dark mb-2">🚀 Quick Actions</h5>
                            <p class="text-muted mb-0">Essential tools for your learning journey</p>
                        </div>
                    </div>
                    
                    <div class="row g-3">
                        <!-- Continue Learning -->
                        <div class="col-xl-3 col-lg-6 col-md-6">
                            <div class="quick-action-card rounded-3 p-3 h-100">
                                <div class="text-center">
                                    <div class="mb-3">
                                        <i class="bi bi-play-circle text-success" style="font-size: 2.5rem;"></i>
                                    </div>
                                    <h6 class="card-title text-dark fw-semibold mb-2">Continue Learning</h6>
                                    <p class="text-muted small mb-0">Resume your lessons</p>
                                </div>
                            </div>
                        </div>

                        <!-- Take Quiz -->
                        <div class="col-xl-3 col-lg-6 col-md-6">
                            <div class="quick-action-card rounded-3 p-3 h-100">
                                <div class="text-center">
                                    <div class="mb-3">
                                        <i class="bi bi-patch-question text-primary" style="font-size: 2.5rem;"></i>
                                    </div>
                                    <h6 class="card-title text-dark fw-semibold mb-2">Take Quiz</h6>
                                    <p class="text-muted small mb-0">Test your knowledge</p>
                                </div>
                            </div>
                        </div>

                        <!-- View Schedule -->
                        <div class="col-xl-3 col-lg-6 col-md-6">
                            <div class="quick-action-card rounded-3 p-3 h-100">
                                <div class="text-center">
                                    <div class="mb-3">
                                        <i class="bi bi-calendar-week text-info" style="font-size: 2.5rem;"></i>
                                    </div>
                                    <h6 class="card-title text-dark fw-semibold mb-2">My Schedule</h6>
                                    <p class="text-muted small mb-0">Plan your studies</p>
                                </div>
                            </div>
                        </div>

                        <!-- Ask Teacher -->
                        <div class="col-xl-3 col-lg-6 col-md-6">
                            <div class="quick-action-card rounded-3 p-3 h-100">
                                <div class="text-center">
                                    <div class="mb-3">
                                        <i class="bi bi-chat-dots text-warning" style="font-size: 2.5rem;"></i>
                                    </div>
                                    <h6 class="card-title text-dark fw-semibold mb-2">Ask Teacher</h6>
                                    <p class="text-muted small mb-0">Get help & support</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Current Learning Section -->
    <div class="row g-4 mb-4">
        <!-- Current Lesson -->
        <div class="col-lg-8">
            <div class="glass-card rounded-4 h-100">
                <div class="card-body p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <div>
                            <h5 class="card-title text-dark mb-2">📚 Current Learning</h5>
                            <p class="text-muted mb-0">Pick up where you left off</p>
                        </div>
                        <span class="badge bg-primary text-white px-3 py-2">In Progress</span>
                    </div>
                    
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <h6 class="text-dark fw-semibold mb-2">Introduction to Digital Literacy</h6>
                            <p class="text-muted mb-3">Learn the fundamentals of digital technology and its applications in daily life.</p>
                            
                            <!-- Progress Bar -->
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <small class="text-muted">Lesson Progress</small>
                                    <small class="text-muted">45%</small>
                                </div>
                                <div class="progress" style="height: 8px;">
                                    <div class="progress-bar bg-success" style="width: 45%"></div>
                                </div>
                            </div>
                            
                            <a href="#" class="btn btn-primary">
                                <i class="bi bi-play-circle me-2"></i>Continue Lesson
                            </a>
                        </div>
                        <div class="col-md-4 text-end">
                            <div class="position-relative d-inline-block">
                                <div style="width: 100px; height: 100px; position: relative;">
                                    <svg width="100" height="100" style="transform: rotate(-90deg);">
                                        <circle cx="50" cy="50" r="42" stroke="#e9ecef" stroke-width="8" fill="transparent"></circle>
                                        <circle cx="50" cy="50" r="42" stroke="#28a745" stroke-width="8" fill="transparent" 
                                                stroke-dasharray="264" stroke-dashoffset="145"></circle>
                                    </svg>
                                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                                        <div class="fw-bold text-success">45%</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Achievements -->
        <div class="col-lg-4">
            <div class="glass-card rounded-4 h-100">
                <div class="card-body p-4">
                    <h5 class="card-title text-dark mb-4">🏆 Recent Achievements</h5>
                    
                    <div class="d-flex align-items-center mb-3 p-3 rounded-3" style="background: rgba(40, 167, 69, 0.1);">
                        <div class="me-3">
                            <i class="bi bi-trophy-fill text-warning" style="font-size: 1.5rem;"></i>
                        </div>
                        <div>
                            <h6 class="text-dark fw-semibold mb-1">Quiz Master</h6>
                            <small class="text-muted">Scored 90% in Digital Basics</small>
                        </div>
                    </div>
                    
                    <div class="d-flex align-items-center mb-3 p-3 rounded-3" style="background: rgba(79, 70, 229, 0.1);">
                        <div class="me-3">
                            <i class="bi bi-fire text-danger" style="font-size: 1.5rem;"></i>
                        </div>
                        <div>
                            <h6 class="text-dark fw-semibold mb-1">7-Day Streak</h6>
                            <small class="text-muted">Consistent learning habit</small>
                        </div>
                    </div>
                    
                    <div class="d-flex align-items-center p-3 rounded-3" style="background: rgba(245, 158, 11, 0.1);">
                        <div class="me-3">
                            <i class="bi bi-star-fill text-primary" style="font-size: 1.5rem;"></i>
                        </div>
                        <div>
                            <h6 class="text-dark fw-semibold mb-1">Fast Learner</h6>
                            <small class="text-muted">Completed 5 lessons this week</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Upcoming Lessons -->
    <div class="row">
        <div class="col-12">
            <div class="glass-card rounded-4">
                <div class="card-body p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <div>
                            <h5 class="card-title text-dark mb-2">📅 Upcoming Lessons</h5>
                            <p class="text-muted mb-0">Your next learning objectives</p>
                        </div>
                        <a href="#" class="btn btn-outline-primary">View All</a>
                    </div>
                    
                    <div class="row g-3">
                        <div class="col-md-4">
                            <div class="quick-action-card rounded-3 p-3">
                                <div class="d-flex align-items-center">
                                    <div class="me-3">
                                        <div class="rounded-circle bg-primary bg-opacity-10 p-2">
                                            <i class="bi bi-laptop text-primary"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <h6 class="text-dark fw-semibold mb-1">Computer Basics</h6>
                                        <small class="text-muted">Next: Hardware Components</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="quick-action-card rounded-3 p-3">
                                <div class="d-flex align-items-center">
                                    <div class="me-3">
                                        <div class="rounded-circle bg-success bg-opacity-10 p-2">
                                            <i class="bi bi-globe text-success"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <h6 class="text-dark fw-semibold mb-1">Internet Safety</h6>
                                        <small class="text-muted">Next: Secure Browsing</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="quick-action-card rounded-3 p-3">
                                <div class="d-flex align-items-center">
                                    <div class="me-3">
                                        <div class="rounded-circle bg-info bg-opacity-10 p-2">
                                            <i class="bi bi-envelope text-info"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <h6 class="text-dark fw-semibold mb-1">Digital Communication</h6>
                                        <small class="text-muted">Next: Email Etiquette</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Floating Continue Learning Button -->
<div class="floating-action">
    <a href="#" class="btn btn-primary btn-lg rounded-circle shadow-lg" style="width: 60px; height: 60px; display: flex; align-items: center; justify-content: center;">
        <i class="bi bi-play-fill fs-4"></i>
    </a>
</div>
{% endblock %}