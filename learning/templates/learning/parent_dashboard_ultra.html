{% extends 'learning/base.html' %}

{% block title %}Parent Dashboard - Rural Digital Learning{% endblock %}

{% block content %}
<div class="container-fluid" style="background-color: #ffffff; min-height: 100vh;">
    <!-- Enhanced Welcome Section -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="position-relative overflow-hidden rounded-4 p-5" style="background: linear-gradient(135deg, #4F46E5 0%, #7C3AED 100%);">
                <!-- Background decoration -->
                <div class="position-absolute" style="top: -50px; right: -50px; width: 200px; height: 200px; background: rgba(255,255,255,0.1); border-radius: 50%;"></div>
                <div class="position-absolute" style="bottom: -30px; left: -30px; width: 150px; height: 150px; background: rgba(255,255,255,0.05); border-radius: 50%;"></div>
                
                <div class="row align-items-center position-relative">
                    <div class="col-lg-8">
                        <div class="text-white">
                            <h1 class="display-5 fw-bold mb-3 fade-in-up">
                                Hey {{ user.first_name|default:user.username|lower }}! 👋
                            </h1>
                            <p class="lead mb-2 opacity-90 fade-in-up" style="animation-delay: 0.1s;">
                                Role: <span class="badge bg-white bg-opacity-90 text-dark fw-semibold">Parent</span>
                                {% if user.userprofile.child_name %}
                                    <span class="badge bg-white bg-opacity-90 text-dark fw-semibold ms-2">Parent of {{ user.userprofile.child_name }}</span>
                                {% endif %}
                            </p>
                            <p class="lead mb-4 opacity-90 fade-in-up" style="animation-delay: 0.1s;">
                                Perfect time to check your children's learning progress and achievements
                            </p>
                            <div class="d-flex flex-wrap gap-3 fade-in-up" style="animation-delay: 0.2s;">
                                <div class="badge bg-white bg-opacity-90 text-dark fw-semibold rounded-pill px-3 py-2">
                                    <i class="bi bi-calendar me-1"></i> 
                                    Sep 17 Today
                                </div>
                                <div class="badge bg-white bg-opacity-90 text-dark fw-semibold rounded-pill px-3 py-2">
                                    <i class="bi bi-people me-1"></i> 
                                    {{ children_count|default:0 }} Children
                                </div>
                                <div class="badge bg-white bg-opacity-90 text-dark fw-semibold rounded-pill px-3 py-2">
                                    <i class="bi bi-graph-up me-1"></i> 
                                    {{ completed_assignments|default:0 }}% Progress
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 text-end">
                        <div class="position-relative">
                            <i class="bi bi-person-hearts text-white opacity-25" style="font-size: 8rem;"></i>
                            <div class="position-absolute top-50 start-50 translate-middle">
                                <div class="bg-white rounded-circle p-3 shadow-lg">
                                    <i class="bi bi-people-fill text-primary fs-2"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Dashboard Cards -->
    <div class="mb-5">
        <div class="row">
            <div class="col-12">
                <h3 class="text-dark fw-bold mb-4 d-flex align-items-center">
                    <i class="bi bi-speedometer2 me-2 text-primary fs-4"></i>
                    <span>Quick Overview</span>
                </h3>
            </div>
        </div>
        <div class="row g-4">
            <!-- Current Activity Card -->
            <div class="col-xl-3 col-lg-6 col-md-6">
                <div class="card border-0 shadow-sm rounded-4 h-100 bg-white">
                    <div class="card-body p-4 text-center">
                        <div class="mb-3">
                            <div class="d-inline-flex align-items-center justify-content-center rounded-circle bg-primary bg-opacity-10" style="width: 60px; height: 60px;">
                                <i class="bi bi-graph-up-arrow text-primary fs-3"></i>
                            </div>
                        </div>
                        <h3 class="fw-bold text-primary mb-2">{{ current_activity|default:3 }}</h3>
                        <p class="card-title text-dark fw-semibold mb-2">Current Activities</p>
                        <p class="text-muted small mb-0">Active learning sessions</p>
                    </div>
                </div>
            </div>

        <!-- Learning Hours Card -->
        <div class="col-xl-3 col-lg-6 col-md-6">
            <div class="card border-0 shadow-sm rounded-4 h-100 bg-white">
                <div class="card-body p-4 text-center">
                    <div class="mb-3">
                        <div class="d-inline-flex align-items-center justify-content-center rounded-circle bg-success bg-opacity-10" style="width: 60px; height: 60px;">
                            <i class="bi bi-clock-history text-success fs-3"></i>
                        </div>
                    </div>
                    <h3 class="fw-bold text-success mb-2">{{ learning_hours|default:24 }}h</h3>
                    <p class="card-title text-dark fw-semibold mb-2">Learning Hours</p>
                    <p class="text-muted small mb-0">Total time this month</p>
                </div>
            </div>
        </div>

        <!-- Completed Assignments Card -->
        <div class="col-xl-3 col-lg-6 col-md-6">
            <div class="card border-0 shadow-sm rounded-4 h-100 bg-white">
                <div class="card-body p-4 text-center">
                    <div class="mb-3">
                        <div class="d-inline-flex align-items-center justify-content-center rounded-circle bg-warning bg-opacity-10" style="width: 60px; height: 60px;">
                            <i class="bi bi-check-circle-fill text-warning fs-3"></i>
                        </div>
                    </div>
                    <h3 class="fw-bold text-warning mb-2">{{ completed_assignments|default:87 }}%</h3>
                    <p class="card-title text-dark fw-semibold mb-2">Assignments Done</p>
                    <p class="text-muted small mb-0">Completion rate</p>
                </div>
            </div>
        </div>

        <!-- Performance Score Card -->
        <div class="col-xl-3 col-lg-6 col-md-6">
            <div class="card border-0 shadow-sm rounded-4 h-100 bg-white">
                <div class="card-body p-4 text-center">
                    <div class="mb-3">
                        <div class="d-inline-flex align-items-center justify-content-center rounded-circle bg-info bg-opacity-10" style="width: 60px; height: 60px;">
                            <i class="bi bi-trophy-fill text-info fs-3"></i>
                        </div>
                    </div>
                    <h3 class="fw-bold text-info mb-2">{{ performance_score|default:85 }}%</h3>
                    <p class="card-title text-dark fw-semibold mb-2">Performance</p>
                    <p class="text-muted small mb-0">Overall progress</p>
                </div>
            </div>
        </div>
        </div>
    </div>




    <!-- Parent Tools & Resources -->
    <div class="mb-5">
        <div class="row">
            <div class="col-12">
                <h3 class="text-dark fw-bold mb-4 d-flex align-items-center">
                    <i class="bi bi-tools me-2 text-primary fs-4"></i>
                    <span>Parent Tools</span>
                </h3>
            </div>
        </div>
        
        <!-- Parent Tools Grid - 4 Equal Columns -->
        <div class="row g-4">
            
            <!-- Teacher Communication Card -->
            <div class="col-3">
                <div class="card border-0 shadow-sm rounded-4 h-100 bg-white">
                    <div class="card-body p-4 text-center">
                        <div class="mb-3">
                            <div class="d-inline-flex align-items-center justify-content-center rounded-circle bg-primary bg-opacity-10" style="width: 60px; height: 60px;">
                                <i class="bi bi-chat-dots text-primary fs-3"></i>
                            </div>
                        </div>
                        <h3 class="fw-bold text-primary mb-2">💬</h3>
                        <p class="card-title text-dark fw-semibold mb-2">Teacher Communication</p>
                        <p class="text-muted small mb-0">Connect with educators</p>
                    </div>
                </div>
            </div>

            <!-- Notifications Card -->
            <div class="col-3">
                <div class="card border-0 shadow-sm rounded-4 h-100 bg-white">
                    <div class="card-body p-4 text-center">
                        <div class="mb-3">
                            <div class="d-inline-flex align-items-center justify-content-center rounded-circle bg-success bg-opacity-10" style="width: 60px; height: 60px;">
                                <i class="bi bi-bell text-success fs-3"></i>
                            </div>
                        </div>
                        <h3 class="fw-bold text-success mb-2">🔔</h3>
                        <p class="card-title text-dark fw-semibold mb-2">Notifications</p>
                        <p class="text-muted small mb-0">Manage preferences</p>
                    </div>
                </div>
            </div>

            <!-- Analytics Card -->
            <div class="col-3">
                <div class="card border-0 shadow-sm rounded-4 h-100 bg-white" style="cursor: pointer;" onclick="window.location.href='{% url 'analytics' %}'">
                    <div class="card-body p-4 text-center">
                        <div class="mb-3">
                            <div class="d-inline-flex align-items-center justify-content-center rounded-circle bg-warning bg-opacity-10" style="width: 60px; height: 60px;">
                                <i class="bi bi-bar-chart text-warning fs-3"></i>
                            </div>
                        </div>
                        <h3 class="fw-bold text-warning mb-2">📊</h3>
                        <p class="card-title text-dark fw-semibold mb-2">Analytics</p>
                        <p class="text-muted small mb-0">View progress reports</p>
                    </div>
                </div>
            </div>

            <!-- Study Schedule Card -->
            <div class="col-3">
                <div class="card border-0 shadow-sm rounded-4 h-100 bg-white">
                    <div class="card-body p-4 text-center">
                        <div class="mb-3">
                            <div class="d-inline-flex align-items-center justify-content-center rounded-circle bg-info bg-opacity-10" style="width: 60px; height: 60px;">
                                <i class="bi bi-calendar3 text-info fs-3"></i>
                            </div>
                        </div>
                        <h3 class="fw-bold text-info mb-2">📅</h3>
                        <p class="card-title text-dark fw-semibold mb-2">Study Schedule</p>
                        <p class="text-muted small mb-0">Plan learning sessions</p>
                    </div>
                </div>
            </div>
            
        </div>
    </div>
    <!-- Floating Teacher Assistant Button -->
    <div class="position-fixed bottom-0 end-0 m-4" style="z-index: 1050;">
        <button class="btn rounded-circle shadow-lg" 
                style="width: 50px; height: 50px; border: none; background: linear-gradient(135deg, #4F46E5, #7C3AED);" 
                data-bs-toggle="modal" 
                data-bs-target="#teacherChatModal"
                title="Chat with Teacher">
    <!-- Floating Chat Icon -->
    <div class="position-fixed bottom-0 end-0 m-4" style="z-index: 1050;">
        <button class="btn rounded-circle shadow-lg" 
                style="width: 50px; height: 50px; border: none; background: linear-gradient(135deg, #ff6b9d, #c44569);" 
                onclick="toggleChatWindow()"
                title="Chat with Sarah">
            <span class="text-white" style="font-size: 24px;">👩‍🏫</span>
        </button>
    </div>
    
    <!-- Floating Chat Window -->
    <div id="chatWindow" class="position-fixed shadow-lg rounded-3 bg-white" 
         style="width: 300px; height: 400px; bottom: 80px; right: 20px; z-index: 1049; display: none; border: 1px solid #dee2e6;">
        
        <!-- Chat Header -->
        <div class="p-3 text-white rounded-top" style="background: linear-gradient(135deg, #ff6b9d, #c44569);">
            <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex align-items-center">
                    <span class="me-2" style="font-size: 20px;">👩‍🏫</span>
                    <small class="fw-semibold">Sarah</small>
                </div>
                <button class="btn btn-sm text-white p-0" onclick="toggleChatWindow()" style="border: none; background: none;">
                    <i class="bi bi-x-lg"></i>
                </button>
            </div>
        </div>
        
        <!-- Chat Messages -->
        <div class="p-3" style="height: 320px; overflow-y: auto;">
            <div class="mb-3">
                <div class="d-flex align-items-start">
                    <div class="me-2 flex-shrink-0 d-flex align-items-center justify-content-center" style="width: 30px; height: 30px;">
                        <span style="font-size: 16px;">👩‍🏫</span>
                    </div>
                    <div class="bg-light rounded-3 p-2 flex-grow-1">
                        <small class="text-dark">Hi! I'm Sarah, your learning assistant. How can I help you today?</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function toggleChatWindow() {
            const chatWindow = document.getElementById('chatWindow');
            if (chatWindow.style.display === 'none' || chatWindow.style.display === '') {
                chatWindow.style.display = 'block';
            } else {
                chatWindow.style.display = 'none';
            }
        }
    </script>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Schedule Modal -->
    <div class="modal fade" id="scheduleModal" tabindex="-1" aria-labelledby="scheduleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="scheduleModalLabel">
                        <i class="bi bi-calendar-check text-info me-2"></i>Create Study Schedule
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="scheduleDate" class="form-label">Date</label>
                            <input type="date" class="form-control" id="scheduleDate">
                        </div>
                        <div class="mb-3">
                            <label for="scheduleTime" class="form-label">Time</label>
                            <input type="time" class="form-control" id="scheduleTime">
                        </div>
                        <div class="mb-3">
                            <label for="scheduleSubject" class="form-label">Subject</label>
                            <select class="form-select" id="scheduleSubject">
                                <option value="">Select Subject</option>
                                <option value="math">Mathematics</option>
                                <option value="science">Science</option>
                                <option value="english">English</option>
                                <option value="history">History</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="scheduleDuration" class="form-label">Duration (minutes)</label>
                            <select class="form-select" id="scheduleDuration">
                                <option value="30">30 minutes</option>
                                <option value="45">45 minutes</option>
                                <option value="60">1 hour</option>
                                <option value="90">1.5 hours</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-info">Create Schedule</button>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Enhanced Progress Circle Styles */
.progress-circle {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: conic-gradient(
        from 0deg,
        #007bff calc(var(--percentage) * 3.6deg),
        #e9ecef calc(var(--percentage) * 3.6deg)
    );
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    box-shadow: 0 4px 15px rgba(0,123,255,0.2);
}

.progress-circle::before {
    content: '';
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: white;
    position: absolute;
    box-shadow: inset 0 2px 8px rgba(0,0,0,0.1);
}

.progress-circle span {
    position: relative;
    z-index: 1;
    font-weight: 700;
}

/* Dashboard Card Enhanced Hover Effects */
.dashboard-card {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    border: 1px solid rgba(0,0,0,0.05);
}

.dashboard-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 20px 40px rgba(0,0,0,0.15) !important;
    border-color: rgba(0,123,255,0.2);
}

/* Text Enhancement */
.text-dark {
    color: #2c3e50 !important;
    font-weight: 600;
}

.card-title {
    color: #34495e !important;
    font-weight: 700 !important;
    font-size: 1.1rem;
}

/* Fade in animation */
.fade-in-up {
    opacity: 0;
    transform: translateY(30px);
    animation: fadeInUp 0.8s ease forwards;
}

@keyframes fadeInUp {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Enhanced Button Styles */
.btn {
    font-weight: 600;
    transition: all 0.3s ease;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 20px rgba(0,0,0,0.2);
}

/* Analytics Cards Enhancement */
.bg-light {
    background-color: #f8f9fa !important;
    border: 1px solid rgba(0,0,0,0.05);
    transition: all 0.3s ease;
}

.bg-light:hover {
    background-color: #ffffff !important;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    transform: translateY(-2px);
}

/* Chat styles */
.ai-message {
    margin-bottom: 15px;
}

.user-message {
    margin-bottom: 15px;
}

.user-message .d-flex {
    flex-direction: row-reverse;
}

.user-message .bg-primary {
    background-color: #007bff !important;
    color: white;
}

/* Professional Icon Styling */
.rounded-circle {
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
}

.dashboard-card:hover .rounded-circle {
    transform: scale(1.1);
    box-shadow: 0 6px 20px rgba(0,0,0,0.2);
}

/* Responsive improvements */
@media (max-width: 768px) {
    .dashboard-card {
        margin-bottom: 1.5rem;
    }
    
    .progress-circle {
        width: 60px;
        height: 60px;
    }
    
    .progress-circle::before {
        width: 45px;
        height: 45px;
    }
}
</style>

<script>
// AI Chat functionality
document.getElementById('sendMessage')?.addEventListener('click', function() {
    const input = document.getElementById('chatInput');
    const message = input.value.trim();
    
    if (message) {
        // Add user message
        const chatContainer = document.querySelector('.chat-container');
        const userMessage = `
            <div class="user-message mb-3">
                <div class="d-flex">
                    <div class="bg-primary rounded-3 p-3 flex-grow-1">
                        <p class="mb-0 text-white">${message}</p>
                    </div>
                    <div class="bg-primary bg-opacity-10 rounded-circle p-2 ms-3">
                        <i class="bi bi-person text-primary"></i>
                    </div>
                </div>
            </div>
        `;
        chatContainer.innerHTML += userMessage;
        
        // Simulate AI response
        setTimeout(() => {
            const aiResponse = `
                <div class="ai-message mb-3">
                    <div class="d-flex">
                        <div class="bg-success bg-opacity-10 rounded-circle p-2 me-3">
                            <i class="bi bi-robot text-success"></i>
                        </div>
                        <div class="bg-light rounded-3 p-3 flex-grow-1">
                            <p class="mb-0">I understand you're asking about "${message}". Let me help you with that!</p>
                        </div>
                    </div>
                </div>
            `;
            chatContainer.innerHTML += aiResponse;
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }, 1000);
        
        input.value = '';
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }
});

// Enter key support for chat
document.getElementById('chatInput')?.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        document.getElementById('sendMessage').click();
    }
});
</script>

            <span class="action-text">Logout</span>
        </a>
    </div>

<script>
// Update time and greeting every second
function updateTimeAndGreeting() {
    const now = new Date();
    const hour = now.getHours();
    const userName = '{{ user.first_name|default:user.username }}';
    
    // Update time display
    const options = { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric',
        hour: 'numeric',
        minute: '2-digit',
        hour12: true
    };
    const timeString = now.toLocaleDateString('en-US', options).replace(/,(\s\d{4})/, ',$1 at');
    document.getElementById('current-time').textContent = timeString;
    
    // Update greeting based on time
    let greeting, emoji, timeIcon, subtitle;
    
    if (hour >= 5 && hour < 12) {
        greeting = `Good Morning, ${userName}!`;
        emoji = '🌅';
        timeIcon = '☀️';
        subtitle = 'Start your day by checking your children\'s learning progress. A new day of discoveries awaits!';
    } else if (hour >= 12 && hour < 17) {
        greeting = `Good Afternoon, ${userName}!`;
        emoji = '🌞';
        timeIcon = '🌤️';
        subtitle = 'Hope your day is going well! Time to check in on your children\'s educational journey.';
    } else if (hour >= 17 && hour < 21) {
        greeting = `Good Evening, ${userName}!`;
        emoji = '🌇';
        timeIcon = '🌆';
        subtitle = 'Evening check-in time! See how your children performed in their studies today.';
    } else {
        greeting = `Good Night, ${userName}!`;
        emoji = '🌙';
        timeIcon = '✨';
        subtitle = 'Thank you for being an engaged parent. Rest well knowing your children are learning and growing!';
    }
    
    // Check if greeting has changed and add smooth transition
    const greetingElement = document.getElementById('greeting-text');
    const emojiElement = document.getElementById('greeting-emoji');
    const timeIconElement = document.getElementById('time-icon');
    const subtitleElement = document.getElementById('hero-subtitle');
    
    if (greetingElement.textContent !== greeting) {
        // Add animation class
        greetingElement.parentElement.classList.add('updating');
        
        // Update content with slight delay for smooth effect
        setTimeout(() => {
            greetingElement.textContent = greeting;
            emojiElement.textContent = emoji;
            timeIconElement.textContent = timeIcon;
            subtitleElement.textContent = subtitle;
            
            // Remove animation class
            greetingElement.parentElement.classList.remove('updating');
        }, 200);
    }
}

// Update time and greeting immediately and then every minute
updateTimeAndGreeting();
setInterval(updateTimeAndGreeting, 60000);

// Add sparkle effects to cards
const cards = document.querySelectorAll('.mega-stat-card, .ultra-action-card, .enhanced-child-card');
cards.forEach(card => {
    card.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-8px) scale(1.02)';
    });
    
    card.addEventListener('mouseleave', function() {
        this.style.transform = 'translateY(0) scale(1)';
    });
});

// Add click animation to quantum buttons
const buttons = document.querySelectorAll('.quantum-btn, .action-btn');
buttons.forEach(button => {
    button.addEventListener('click', function(e) {
        const ripple = document.createElement('span');
        ripple.classList.add('ripple');
        this.appendChild(ripple);
        
        setTimeout(() => {
            ripple.remove();
        }, 600);
    });
});

// Child action functions
function viewChildDetails(childId) {
    // Create a modal or navigate to detailed view
    showNotification('👁️ Opening detailed view for student...', 'info');
    // You can implement navigation to a detailed analytics page
    window.location.href = `/parents/analytics/?child=${childId}`;
}

function messageTeacher(childId) {
    // Open messaging interface
    showNotification('💬 Opening teacher communication...', 'info');
    // Redirect to teacher selection page for the child
    window.location.href = `/teacher-communication/child/${childId}/select-teacher/`;
}

function contactSupport() {
    // Open contact form or support chat
    showNotification('📞 Connecting you to support...', 'info');
    // You can implement support contact functionality
}

// Notification system
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    notification.innerHTML = `
        <div class="notification-content">
            <span>${message}</span>
            <button class="notification-close" onclick="closeNotification(this.parentElement.parentElement)">×</button>
        </div>
    `;
    
    // Add notification styles
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        padding: 1rem 1.5rem;
        border-radius: 15px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        animation: slideIn 0.3s ease;
        border-left: 4px solid var(--accent-color);
        color: var(--text-primary);
        max-width: 300px;
    `;
    
    document.body.appendChild(notification);
    
    // Auto remove after 3 seconds
    setTimeout(() => {
        closeNotification(notification);
    }, 3000);
}

function closeNotification(element) {
    element.style.animation = 'slideOut 0.3s ease';
    setTimeout(() => {
        element.remove();
    }, 300);
}

// AI Chat functionality
document.getElementById('sendMessage')?.addEventListener('click', function() {
    const input = document.getElementById('chatInput');
    const message = input.value.trim();
    
    if (message) {
        // Add user message
        const chatContainer = document.querySelector('.chat-container');
        const userMessage = `
            <div class="user-message mb-3">
                <div class="d-flex">
                    <div class="bg-primary rounded-3 p-3 flex-grow-1">
                        <p class="mb-0 text-white">${message}</p>
                    </div>
                    <div class="bg-primary bg-opacity-10 rounded-circle p-2 ms-3">
                        <i class="bi bi-person text-primary"></i>
                    </div>
                </div>
            </div>
        `;
        chatContainer.innerHTML += userMessage;
        
        // Simulate AI response
        setTimeout(() => {
            const aiResponse = `
                <div class="ai-message mb-3">
                    <div class="d-flex">
                        <div class="bg-success bg-opacity-10 rounded-circle p-2 me-3">
                            <i class="bi bi-robot text-success"></i>
                        </div>
                        <div class="bg-light rounded-3 p-3 flex-grow-1">
                            <p class="mb-0">I understand you're asking about "${message}". Let me help you with that!</p>
                        </div>
                    </div>
                </div>
            `;
            chatContainer.innerHTML += aiResponse;
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }, 1000);
        
        input.value = '';
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }
});

// Enter key support for chat
document.getElementById('chatInput')?.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        document.getElementById('sendMessage').click();
    }
});
</script>
{% endblock content %}